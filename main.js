(()=>{"use strict";const t={submitButton:".form__submit-button",resetButton:".form__reset-button",physicalParameters:".form__parameters",formItem:".form__item",input:"input",inputError:"input__wrapper_error"},e={submitButton:t.submitButton,resetButton:t.resetButton,counterResult:".counter__result",normalCalories:"#calories-norm",minimalCalories:"#calories-minimal",maximalCalories:"#calories-maximal",hiddenResult:"counter__result--hidden"},s=document.querySelector(".form"),i=new class{constructor(t,e){this._form=t,this._selectors=e,this._submitButton=this._form.querySelector(this._selectors.submitButton),this._resetButton=this._form.querySelector(this._selectors.resetButton),this._parameters=this._form.querySelector(this._selectors.physicalParameters),this._inputs=this._parameters.querySelectorAll(this._selectors.input),this._formFields=this._form.querySelectorAll(this._selectors.formItem)}_showError(t){t.closest("div").classList.add(this._selectors.inputError),this._parameters.querySelector(`#${t.id}-error`).textContent=t.validationMessage}_hideError(t){t.closest("div").classList.remove(this._selectors.inputError),this._parameters.querySelector(`#${t.id}-error`).textContent=null}_toggleSubmitButton(){this._form.checkValidity()?this._submitButton.removeAttribute("disabled"):this._submitButton.setAttribute("disabled",!0)}_checkInputValidity(){this._inputs.forEach((t=>{t.addEventListener("input",(()=>{this._toggleSubmitButton(this._submitButton),t.validity.valid?this._hideError(t):this._showError(t)}))}))}_checkChangeFields(){this._formFields.forEach((t=>{t.addEventListener("change",(()=>{this._resetButton.removeAttribute("disabled")}))}))}clearValidation(){this._form.reset(),this._resetButton.setAttribute("disabled",!0),this._toggleSubmitButton(),this._inputs.forEach((t=>{this._hideError(t)}))}enableValidation(){this._checkChangeFields(),this._checkInputValidity()}}(s,t),r=new class{constructor(t,e){this._form=t,this._selectors=e}_getGenderValue(){return this._switcher=this._form.querySelector(this._selectors.genderSwitcher),this._genders=Array.from(this._switcher.querySelectorAll(this._selectors.genderItem)),this._chosenGender=this._genders.find((t=>t.checked)).value,this._chosenGender}_getActivityLevel(){return this._activitySwitcher=this._form.querySelector(this._selectors.activitySwitcher),this._activityLevels=Array.from(this._activitySwitcher.querySelectorAll(this._selectors.activityLevel)),this._chosenActivityLevel=this._activityLevels.find((t=>t.checked)).value,this._chosenActivityLevel}getUserParameters(){const t={};return t.gender=this._getGenderValue(),t.age=Number.parseInt(this._form.querySelector(this._selectors.age).value),t.height=Number.parseInt(this._form.querySelector(this._selectors.height).value),t.weight=Number.parseInt(this._form.querySelector(this._selectors.weight).value),t.activity=this._getActivityLevel(),t}}(s,{genderSwitcher:".switcher",genderItem:".switcher__item input",age:"#age",height:"#height",weight:"#weight",activitySwitcher:".radios-group",activityLevel:".radio__wrapper input"}),o=new class{constructor(t,e,s,i){this._form=t,this._selectors=e,this._submitButton=this._form.querySelector(this._selectors.submitButton),this._resetButton=this._form.querySelector(this._selectors.resetButton),this._result=document.querySelector(this._selectors.counterResult),this._resetHandler=s,this._getParameters=i}_calculateCalorieNorm(t){let e;switch(t.gender){case"male":e=10*t.weight+6.25*t.height-5*t.age+5;break;case"female":e=10*t.weight+6.25*t.height-5*t.age-161}switch(t.activity){case"min":e*=1.2;break;case"low":e*=1.375;break;case"medium":e*=1.55;break;case"high":e*=1.725;break;case"max":e*=1.9}return Math.round(e)}_showResult(t,e,s){this._normal=this._result.querySelector(this._selectors.normalCalories),this._minimal=this._result.querySelector(this._selectors.minimalCalories),this._maximal=this._result.querySelector(this._selectors.maximalCalories),this._normal.textContent=t,this._minimal.textContent=e,this._maximal.textContent=s,this._result.classList.remove(this._selectors.hiddenResult)}_hideResult(){this._normal=null,this._minimal=null,this._maximal=null,this._result.classList.add(this._selectors.hiddenResult)}setEventListeners(){this._form.addEventListener("submit",(t=>{t.preventDefault(),this._physicalParameters=this._getParameters();const e=this._calculateCalorieNorm(this._physicalParameters),s=Math.round(.15*e),i=s+e,r=e-s;this._showResult(e,r,i)})),this._resetButton.addEventListener("click",(()=>{this._resetHandler(),this._hideResult()}))}}(s,e,(function(){i.clearValidation()}),(function(){return r.getUserParameters()}));i.enableValidation(),o.setEventListeners()})();